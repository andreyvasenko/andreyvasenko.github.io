<!DOCTYPE html>
<html class="no-js">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="style.css">
		<meta name="author" content="Andrey Vasenko"/>
		<title>A.V.</title>
		<script src="JS/myScript.js" type="text/javascript"></script>
		<script src="JS/three.js" type="text/javascript"></script>
		<script src="JS/OrbitControls.js" type="text/javascript"></script>

		<script src="JS/shaders/CopyShader.js"></script>
		<script src="JS/shaders/DigitalGlitch.js"></script>
		<script src="JS/shaders/FilmShader.js"></script>
		<script src="JS/shaders/RGBShiftShader.js"></script>

		<script src="JS/postprocessing/EffectComposer.js"></script>
		<script src="JS/postprocessing/RenderPass.js"></script>
		<script src="JS/postprocessing/ShaderPass.js"></script>
		<script src="JS/postprocessing/GlitchPass.js"></script>
		<script src="JS/postprocessing/FilmPass.js"></script>
	</head>
	<body>
		<div id="content">
			<div class="info">
				<object id="anim-object" data="animations/anim1.html"></object>
				<h1><span>Hi! My name is </span><br> Andrey Vasenko.</h1>
				<p>I am a Graphic Designer,<br> Web Developer and Illustrator.</p>

				<div id = "container">
					<div id = "icon" onclick="expand()"><p>Links!</p></div>
					<div id = "menu">
						<div id = "menu-size">
							<div class = "item">
								<a href="mailto:andreytme@gmail.com">andreytme@gmail.com</a>
							</div>
							<div class = "item">
								<a href="https://codepen.io/andreyvasenko/">my CodePen</a>
							</div>
						</div>
					</div>
				</div>

			</div>
			<div class="pointer" id = "mesh"></div>
		</div>
		<div id="bg"></div>
		<script>
			
			function expand() {
				var menu = document.getElementById('menu');
				if (menu.clientHeight) {
					menu.style.height = 0;
				} else {
					var wrapper = document.getElementById('menu-size');
					menu.style.height = wrapper.clientHeight + "px";
				}
			}

			// Setup a new scene
			var container = document.getElementById('mesh');
			var scene = new THREE.Scene();
			var clock = new THREE.Clock();

			// Setup the camera
			var camera = new THREE.PerspectiveCamera(40, container.clientWidth/container.clientHeight, 0.1, 1000);
			camera.position.z = 1.3;
			camera.position.y = 0.4;

			// Setup the renderer
			//var renderer = new THREE.WebGLRenderer();
			var renderer = new THREE.WebGLRenderer( { alpha: true } )

			renderer.setSize(container.clientWidth,container.clientHeight);
			container.appendChild(renderer.domElement);

			var composer;

			// Models
			var model;

			// Load the JSON files and provide callback functions (modelToScene
			var loader = new THREE.JSONLoader();
			loader.load( "mesh/untitled.json", addModelToScene);


			// After loading JSON from our file, we add it to the scene
			function addModelToScene( geometry, material ) {
				//var material = new THREE.MeshFaceMaterial(materials);
				model = new THREE.Mesh( geometry, material );
				model.scale.set(1,1,1);
				model.position.y += 0.1;
				scene.add( model );
			}

			// Add the lights
			var ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
			scene.add(ambientLight);

			var light1 = new THREE.PointLight( 0x0a80ff,1 );
			light1.position.set( 10, 1, -5 );
			scene.add( light1 );


			var light2 = new THREE.PointLight( 0xd856ea,0.5 );
			light2.position.set( 1, 1, 5 );
			scene.add( light2 );


			// Render loop to rotate our sphere by a little bit each frame
			var render = function () {
				requestAnimationFrame(render);
				//renderer.render(scene, camera);
				//composer.render(scene, camera);
				var delta = clock.getDelta();
				composer.render(delta);
				controls.update();
			};

			//ORBIT CONTROLS
			controls = new THREE.OrbitControls(camera, container);
			controls.target.set( 0, 0, 0 );
			controls.enablePan = false;
			controls.enableKeys = false;
			controls.minDistance = 0.4;
			controls.maxDistance = 2;
			controls.autoRotate = true;

			// postprocessing
			composer = new THREE.EffectComposer( renderer );
			composer.addPass( new THREE.RenderPass( scene, camera ) );

			var effect = new THREE.ShaderPass( THREE.RGBShiftShader );
			effect.uniforms[ 'amount' ].value = 0.01;
			composer.addPass( effect );

			effect = new THREE.GlitchPass();
			composer.addPass( effect );

			effect = new THREE.FilmPass( 0.3, 0.6, 256, false );
			composer.addPass( effect );

			effect.renderToScreen = true;

			render(); 
			
			(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)
		</script>
	</body>
</html>